{% extends 'base.html' %}
{% block title %}Inventory Alerts{% endblock %}
{% block content %}
<h1>Inventory Alerts & Procurement</h1>
<div class="ia-section">
  <h2>Alert Rules</h2>
  <form id="rule-form">
    <input type="number" name="variant_id" placeholder="Variant ID" required>
    <input type="number" name="safety_stock_quantity" placeholder="Safety Stock" required>
    <input type="number" name="reorder_point_quantity" placeholder="Reorder Point" required>
    <input type="number" step="0.01" name="alert_threshold_percentage" placeholder="Alert %" required>
    <button type="submit">Upsert Rule</button>
  </form>
  <table id="rules-table" class="table">
    <thead><tr><th>Variant</th><th>Safety</th><th>Reorder</th><th>%</th><th>Active</th><th>Actions</th></tr></thead>
    <tbody></tbody>
  </table>
</div>
<hr>
<div class="ia-section">
  <h2>Inventory Alerts</h2>
  <form id="alert-form">
    <input type="number" name="production_lot_id" placeholder="Lot ID" required>
    <input type="number" name="variant_id" placeholder="Variant ID" required>
    <input type="number" name="required_quantity" placeholder="Required Qty" required>
    <button type="submit">Create Alert</button>
  </form>
  <table id="alerts-table" class="table">
    <thead><tr><th>ID</th><th>Lot</th><th>Variant</th><th>Severity</th><th>Shortfall</th><th>Ack</th><th>Action</th></tr></thead>
    <tbody></tbody>
  </table>
</div>
<hr>
<div class="ia-section">
  <h2>Procurement Recommendations</h2>
  <form id="rec-form">
    <input type="number" name="production_lot_id" placeholder="Lot ID" required>
    <input type="number" name="variant_id" placeholder="Variant ID" required>
    <input type="number" name="supplier_id" placeholder="Supplier ID">
    <input type="number" name="recommended_quantity" placeholder="Qty" required>
    <input type="date" name="required_delivery_date" required>
    <input type="number" step="0.01" name="estimated_cost" placeholder="Est. Cost">
    <button type="submit">Recommend</button>
  </form>
  <table id="recs-table" class="table">
    <thead><tr><th>ID</th><th>Lot</th><th>Variant</th><th>Supplier</th><th>Qty</th><th>Status</th><th>Updated</th><th>Action</th></tr></thead>
    <tbody></tbody>
  </table>
</div>
<script src="/static/js/inventory_alerts.js"></script>
<style>
.ia-section { margin-bottom: 2rem; }
.table { width:100%; border-collapse: collapse; }
.table th, .table td { border:1px solid #ccc; padding:4px; font-size:0.85rem; }
form input { margin-right:4px; }
</style>
{% endblock %}
