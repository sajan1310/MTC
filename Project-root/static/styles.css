/* === GLASS DASHBOARD UI (Final, Fully Optimized Version) === */

/* --- Global & Variables --- */
:root {
    /* Light Mode Palette */
    --primary-color: #6C63FF;
    --primary-hover: #574BDB;
    --danger-color: #E53E3E;
    --text-color: #1A202C;
    --subtle-text-color: #718096;
    --border-color: #E2E8F0;
    --bg-color: #F7FAFC;
    --card-bg: #FFFFFF;
    --input-bg: #FFFFFF;
    --table-row-bg: #FFFFFF;
    --shadow-color: rgba(0, 0, 0, 0.05);
    --modal-bg: #FFFFFF;
    --sidebar-bg: #FFFFFF;
    --header-bg: rgba(255, 255, 255, 0.8);
    --button-cancel-bg: #F7FAFC;
    --button-cancel-hover-bg: #EDF2F7;
    --divider-text-bg: #FFFFFF;

    /* Shared Variables */
    --font-family: 'Inter', sans-serif;
    --sidebar-width: 260px;
    --sidebar-width-collapsed: 88px;
    --header-height: 60px;
    --transition-speed: cubic-bezier(0.4, 0, 0.2, 1) 0.3s;
}

body.dark-mode {
    /* Dark Mode Palette */
    --primary-color: #7F9CF5;
    --primary-hover: #A3BFFA;
    --danger-color: #FC8181;
    --text-color: #E2E8F0;
    --subtle-text-color: #A0AEC0;
    --border-color: #2D3748;
    --bg-color: #1A202C;
    --card-bg: #2D3748;
    --input-bg: #1A202C;
    --table-row-bg: #2D3748;
    --shadow-color: rgba(0, 0, 0, 0.2);
    --modal-bg: #2D3748;
    --sidebar-bg: #2D3748;
    --header-bg: rgba(45, 55, 72, 0.8);
    --button-cancel-bg: #4A5568;
    --button-cancel-hover-bg: #2D3748;
    --divider-text-bg: #2D3748;
}

body {
    display: flex;
    margin: 0;
    font-family: var(--font-family);
    color: var(--text-color);
    background: var(--bg-color);
    background-attachment: fixed;
    line-height: 1.6;
    position: relative;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* --- Layout --- */
.sidebar {
    width: var(--sidebar-width);
    background: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    height: 100vh;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 1001;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    box-sizing: border-box;
    transition: width var(--transition-speed), transform var(--transition-speed), background-color 0.3s ease;
}
.content-wrapper {
    flex: 1;
    margin-left: var(--sidebar-width);
    display: flex;
    flex-direction: column;
    transition: margin-left var(--transition-speed);
    width: calc(100% - var(--sidebar-width));
}
.main-header {
    background: var(--header-bg);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border-color);
    padding: 0 2rem;
    height: var(--header-height);
    display: flex;
    justify-content: flex-end;
    align-items: center;
    position: sticky;
    top: 0;
    z-index: 1000;
    transition: background-color 0.3s ease;
}
.container {
    max-width: 1400px;
    width: 100%;
    margin: 2rem auto;
    padding: 0 2rem;
    box-sizing: border-box;
}

/* --- Sidebar & Navigation --- */
.sidebar-header { min-height: var(--header-height); display: flex; align-items: center; justify-content: space-between; padding: 0 0.5rem; }
.sidebar .logo { color: var(--text-color); font-size: 1.8rem; font-weight: 700; white-space: nowrap; transition: opacity 0.2s ease, width 0.2s ease; }
.sidebar-nav { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 1.5rem; }
.sidebar-nav .nav-item, .sidebar-footer .nav-item { position: relative; display: flex; align-items: center; gap: 1rem; color: var(--text-color); text-decoration: none; padding: 0.8rem 1rem; border-radius: 8px; font-weight: 500; transition: background-color 0.2s, color 0.2s; white-space: nowrap; }
.sidebar-nav .nav-item:hover { background-color: rgba(255, 255, 255, 0.1); }
body.dark-mode .sidebar-nav .nav-item:hover { background-color: rgba(255, 255, 255, 0.05); }
.sidebar-nav .nav-item.active { background: var(--primary-color); color: white; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); }
.sidebar-nav .nav-item.active svg { stroke: white; }
.sidebar-nav .nav-item svg { flex-shrink: 0; transition: transform 0.3s ease; }
.sidebar-nav .nav-item span { transition: opacity 0.2s ease, visibility 0.2s ease; }
.sidebar-footer { margin-top: auto; }
.sidebar-footer .logout-btn { background: transparent; border: none; color: var(--subtle-text-color); }
.sidebar-footer .logout-btn:hover { background-color: rgba(229, 62, 62, 0.1); color: var(--danger-color); }
.sidebar-footer .logout-btn:hover svg { stroke: var(--danger-color); }
.sidebar-toggle-btn { background: transparent; border: none; cursor: pointer; color: var(--text-color); padding: 0.5rem; border-radius: 8px; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s ease, transform 0.3s ease; }
.sidebar-toggle-btn:hover { background-color: rgba(0, 0, 0, 0.05); }
body.dark-mode .sidebar-toggle-btn:hover { background-color: rgba(255, 255, 255, 0.1); }

/* --- Collapsed & Responsive Sidebar --- */
body.sidebar-collapsed .sidebar { width: var(--sidebar-width-collapsed); }
body.sidebar-collapsed .content-wrapper { margin-left: var(--sidebar-width-collapsed); width: calc(100% - var(--sidebar-width-collapsed)); }
body.sidebar-collapsed .sidebar .logo, body.sidebar-collapsed .sidebar .nav-item span { opacity: 0; visibility: hidden; width: 0; }
body.sidebar-collapsed .sidebar .nav-item { justify-content: center; }
body.sidebar-collapsed .sidebar .sidebar-toggle-btn { transform: rotate(180deg); }
body.sidebar-collapsed .sidebar-nav .nav-item:hover span,
body.sidebar-collapsed .sidebar-footer .nav-item:hover span { 
    visibility: visible; 
    opacity: 1; 
    position: absolute; 
    left: 100%; 
    top: 50%; 
    transform: translateY(-50%); 
    margin-left: 1rem; 
    background-color: #333; 
    color: white; 
    padding: 0.4rem 0.8rem; 
    border-radius: 6px; 
    font-size: 0.9rem; 
    z-index: 1002; 
    transition-delay: 0.1s; 
    width: auto;
    white-space: nowrap;
}
body.sidebar-collapsed .sidebar-nav .nav-item:hover span::before,
body.sidebar-collapsed .sidebar-footer .nav-item:hover span::before { 
    content: ''; position: absolute; right: 100%; top: 50%; transform: translateY(-50%); border: 5px solid transparent; border-right-color: #333; 
}
body.sidebar-collapsed .sidebar-footer .logout-btn svg { transform: scale(1.2); }

/* --- Header, User Menu & Theme Toggle --- */
.header-actions { display: flex; align-items: center; gap: 1rem; }
.theme-toggle-btn { background: transparent; border: none; cursor: pointer; color: var(--text-color); padding: 0.5rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s ease; }
.theme-toggle-btn:hover { background-color: rgba(0,0,0,0.1); }
body.dark-mode .theme-toggle-btn:hover { background-color: rgba(255,255,255,0.1); }
.theme-toggle-btn .sun-icon { display: block; }
.theme-toggle-btn .moon-icon { display: none; }
body.dark-mode .theme-toggle-btn .sun-icon { display: none; }
body.dark-mode .theme-toggle-btn .moon-icon { display: block; }
.user-menu { display: flex; align-items: center; gap: 1rem; }
.user-menu > a { display: flex; align-items: center; gap: 0.5rem; text-decoration: none; color: var(--text-color); font-weight: 500; }
.profile-pic-small { width: 36px; height: 36px; border-radius: 50%; object-fit: cover; }

/* --- Modal Styles --- */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
  z-index: 1000;
  padding: 1rem; /* Add padding for small screens */
  box-sizing: border-box;
}

/* This class is used by JS to show the modal */
.modal.is-open {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background: var(--modal-bg);
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.1);
  width: 100%; /* Let padding control the distance from edge */
  max-width: 600px;
  display: flex;
  flex-direction: column;
  max-height: calc(100vh - 2rem); /* Consider parent padding */
  overflow: hidden; /* Prevent content from spilling out */
}

.modal-content.large {
  max-width: 800px;
}

/* === THIS IS THE REWRITTEN & OPTIMIZED SECTION === */
/* --- Cards & Auth Pages --- */
.form-card { background: var(--card-bg); padding: 2.5rem; border-radius: 16px; border: 1px solid var(--border-color); box-shadow: 0 4px 6px -1px var(--shadow-color), 0 2px 4px -1px var(--shadow-color); }
.auth-card { margin: 3rem auto; max-width: 420px; }
body:has(.auth-card) .sidebar, body:has(.auth-card) .main-header { display: none; }
body:has(.auth-card) .content-wrapper { margin-left: 0; width: 100%; }
.auth-header { text-align: center; margin-bottom: 1.5rem; }
.auth-logo { display: inline-block; background: #000; padding: 0.75rem 2rem; border-radius: 12px; margin-bottom: 1.5rem; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); }
.auth-logo img { display: block; max-height: 60px; width: auto; }
.auth-header h1 { margin: 0 0 0.5rem 0; font-size: 2rem; }
.auth-subtitle { margin: 0; color: var(--subtle-text-color); }
.divider { width: 100%; text-align: center; border-bottom: 1px solid var(--border-color); line-height: 0.1em; margin: 1.5rem 0; }
.divider span { background: var(--divider-text-bg); padding: 0 10px; color: var(--subtle-text-color); font-size: 0.9rem; }
.social-login { width: 100%; }
.form-options { display: flex; justify-content: flex-end; margin-bottom: 1.5rem; font-size: 0.9rem; }
.forgot-password { color: var(--primary-color); text-decoration: none; font-weight: 500; }
.forgot-password:hover { text-decoration: underline; }
.auth-switch { text-align: center; margin-top: 1.5rem; font-size: 0.9rem; color: var(--subtle-text-color); }
.auth-switch a { color: var(--primary-color); font-weight: 600; text-decoration: none; }
.auth-switch a:hover { text-decoration: underline; }

/* Centered and Equal Size Buttons for Auth Card */
.auth-card .button-row { 
    justify-content: center; 
    margin-top: 1rem; 
}
.auth-card .button-row button,
.auth-card .google-btn {
    width: 90%;
    background: #512eee !important;
    color: #fff !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1) !important;
    border: none;
    gap: 0.75rem;
    font-weight: 600;
}
.auth-card .button-row button:hover,
.auth-card .google-btn:hover {
    background: #4524d3 !important; /* Darker purple for hover */
    transform: translateY(-2px);
    box-shadow: 0 6px 9px rgba(0, 0, 0, 0.15) !important;
}
/* === END OF REWRITTEN SECTION === */

/* --- Profile Page --- */
.profile-card { max-width: 800px; }
.profile-header { margin-bottom: 2rem; }
.profile-logo { margin-bottom: 0.5rem; }
.profile-image { width: 64px; height: 64px; border-radius: 50%; object-fit: cover; }

/* --- Buttons, Forms, Inputs --- */
.button, button { font-family: var(--font-family); display: inline-flex; align-items: center; justify-content: center; padding: 0.65rem 1.25rem; border: 1px solid transparent; border-radius: 8px; font-size: 0.95rem; font-weight: 600; text-decoration: none; cursor: pointer; transition: all 0.2s ease; }
.button.create, button.create { background: var(--primary-color); color: white; box-shadow: 0 1px 3px 0 var(--shadow-color), 0 1px 2px 0 var(--shadow-color); }
.button.create:hover, button.create:hover { background: var(--primary-hover); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); }
.button.cancel, button.cancel { background-color: var(--button-cancel-bg); color: var(--subtle-text-color); border-color: var(--border-color); }
.button.cancel:hover, button.cancel:hover { background-color: var(--button-cancel-hover-bg); border-color: var(--subtle-text-color); }
.button.danger, button.danger { background-color: var(--danger-color); color: white; }
.button.danger:hover, button.danger:hover { background-color: #c53030; }
.button-row { display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem; width: 100%; }
.form-row { display: flex; flex-wrap: wrap; gap: 1.5rem; width: 100%; margin-bottom: 1.5rem; }
.form-field { flex: 1; min-width: 250px; display: flex; flex-direction: column; }
label { margin-bottom: 0.5rem; font-weight: 500; font-size: 0.9rem; }
input, textarea, select { width: 100%; padding: 0.8rem 1rem; border: 1px solid var(--border-color); background-color: var(--input-bg); border-radius: 8px; font-size: 1rem; box-sizing: border-box; transition: all 0.2s ease; color: var(--text-color); -webkit-appearance: none; -moz-appearance: none; appearance: none; }
/* Targets elements that have BOTH 'stock-input' AND 'compact' classes */
.stock-input.compact {
  width: 120px;
}
input:focus, textarea:focus, select:focus { outline: none; border-color: var(--primary-color); background-color: var(--card-bg); box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary-color) 30%, transparent); }
body.dark-mode input:focus, body.dark-mode textarea:focus, body.dark-mode select:focus { background-color: #2D3748; }

/* --- Select2 Overrides --- */
.select2-container--default .select2-selection--single {
    background-color: var(--input-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    height: auto;
}
.select2-container--default .select2-selection--single .select2-selection__rendered {
    color: var(--text-color);
    line-height: 2.4;
    padding-left: 1rem;
    padding-right: 2rem;
}
.select2-container--default .select2-selection--single .select2-selection__arrow {
    height: 2.4rem;
    right: 0.5rem;
}
.select2-dropdown {
    background-color: var(--card-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}
.select2-container--default .select2-search--dropdown .select2-search__field {
    background-color: var(--input-bg);
    border: 1px solid var(--border-color);
    color: var(--text-color);
}
.select2-container--default .select2-results__option--highlighted[aria-selected] {
    background-color: var(--primary-color);
}

.select2-results__option {
    color: #1A202C; /* Set text color to black for dropdown options */
}

/* --- Table-Based Inventory & User Management Styles --- */
.page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border-color); }
.page-header h2 { margin: 0; }

.search-controls {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.filter-container {
  display: flex;
  align-items: center;
}

.filter-label {
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 0.9rem;
  color: var(--subtle-text-color);
  gap: 0.5rem;
}

.filter-checkbox {
  width: auto;
  margin-right: 0.5rem;
  accent-color: var(--primary-color);
}

.toggle-switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 28px;
}

.toggle-switch-checkbox {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-switch-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: .4s;
  border-radius: 28px;
}

.toggle-switch-slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  transition: .4s;
  border-radius: 50%;
}

.toggle-switch-checkbox:checked + .toggle-switch-slider {
  background-color: var(--primary-color);
}

.toggle-switch-checkbox:checked + .toggle-switch-slider:before {
  transform: translateX(22px);
}

.toggle-switch-label {
  margin-left: 0.5rem;
  font-size: 0.9rem;
  color: var(--subtle-text-color);
}
.inventory-table-container { margin-top: 1.5rem; overflow-x: auto; }
.inventory-table { width: 100%; border-collapse: separate; border-spacing: 3px 8px; table-layout: auto; }
.inventory-table th, .inventory-table td { text-align: left; vertical-align: middle; padding: 1.25rem 1rem; }
.inventory-table th { font-weight: 600; font-size: 0.85rem; color: var(--subtle-text-color); text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 1px solid var(--border-color); white-space: nowrap; }
.inventory-table td { white-space: normal; padding: 20px 15px; }
.item-row td { background: var(--table-row-bg); }
.item-row td:first-child { border-top-left-radius: 12px; border-bottom-left-radius: 12px; }
.item-row td:last-child { border-top-right-radius: 12px; border-bottom-right-radius: 12px; }
.item-row { transition: transform 0.2s ease, box-shadow 0.2s ease; }
.item-row:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
.expand-btn { background: transparent; border: 1px solid var(--subtle-text-color); color: var(--subtle-text-color); width: 28px; height: 28px; border-radius: 50%; padding: 0; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; }
.expand-btn.expanded { transform: rotate(90deg); background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
.actions-cell { display: flex; gap: 0.5rem; }
.actions-cell .button { padding: 0.5rem 1rem; font-size: 0.9rem; }
.variant-details-row td { padding: 0; }
.variant-details-container {
    padding: 1.5rem;
    background-color: rgba(0, 0, 0, 0.03);
    overflow: visible; /* Allow content to overflow if needed */
}
body.dark-mode .variant-details-container { background-color: rgba(255,255,255,0.03); }
.item-description-detail {
    width: auto;
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
    border-bottom: 1px solid var(--border-color);
    white-space: normal;
    overflow: visible; /* Ensure content is not hidden */
    height: auto; /* Ensure height is not constrained */
    max-height: none; /* Remove any height restrictions */
    word-break: break-word; /* Break long words to prevent overflow */
}

/* Add this new rule to ensure the strong tag's content also wraps */
.item-description-detail strong {
    white-space: normal;
    word-break: break-all;
}
.variants-matrix-container { overflow-x: auto; padding-bottom: 0.5rem; }
.variants-sub-table.matrix { border-spacing: 0; }
.variants-sub-table.matrix th, .variants-sub-table.matrix td { text-align: center; min-width: 120px; }
.variants-sub-table.matrix .color-header, .variants-sub-table.matrix .color-cell { text-align: left; font-weight: 600; min-width: 150px; background-color: rgba(0,0,0,0.03); position: sticky; left: 0; }
body.dark-mode .variants-sub-table.matrix .color-header, body.dark-mode .variants-sub-table.matrix .color-cell { background-color: rgba(255,255,255,0.03); }
.variants-sub-table.matrix .stock-input { text-align: center; }
.variants-sub-table.matrix .empty-cell { background-color: rgba(0,0,0,0.03); }
body.dark-mode .variants-sub-table.matrix .empty-cell { background-color: rgba(255,255,255,0.03); }
.variants-sub-table th, .variants-sub-table td { padding: 0.85rem; border-bottom: 1px solid var(--border-color); }
.variants-sub-table .stock-input { width: 80px; }
.stock-cell-container { position: relative; padding-right: 2rem !important; }
.status-badge { padding: 15px 20px; border-radius: 9999px; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.status-badge.in-stock { background-color: rgba(74, 222, 128, 0.2); color: #166534; }
body.dark-mode .status-badge.in-stock { background-color: rgba(74, 222, 128, 0.2); color: #A7F3D0; }
.status-badge.low-stock { background-color: rgba(251, 146, 60, 0.2); color: #9A3412; }
body.dark-mode .status-badge.low-stock { background-color: rgba(251, 146, 60, 0.2); color: #FCD34D; }
.inventory-table td:nth-child(8) { text-align: center; }
.variants-sub-table.matrix .status-badge { position: absolute; top: 50%; right: 0.5rem; transform: translateY(-50%); width: 12px; height: 12px; padding: 0; border: 2px solid white; }
.variants-sub-table.matrix .status-badge.in-stock { background-color: #34D399; }
.variants-sub-table.matrix .status-badge.low-stock { background-color: #FBBF24; }
/* Target the 8th header (th) and 8th data (td) cell in each row */
.inventory-table th:nth-child(8),
.inventory-table td:nth-child(8) {
  min-width: 120px; /* Adjust as needed */
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 1.5rem;
  margin-bottom: 1.5rem;
  padding: 0 0 1.5rem 0; /* Adjusted padding */
}
.modal-header h3 { margin: 0; }
#add-edit-item-modal section { margin-bottom: 2.5rem; }
#add-edit-item-modal section h4 { margin-top: 0; margin-bottom: 1.5rem; color: var(--subtle-text-color); font-size: 1.1rem; font-weight: 500; }
.variants-table table { width: 100%; border-collapse: collapse; }
.variants-table th, .variants-table td { padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-color); }
.variants-table th { background-color: rgba(0, 0, 0, 0.02); }
body.dark-mode .variants-table th { background-color: rgba(255, 255, 255, 0.02); }
.variants-table .stock-input, .variants-table .threshold-input { width: 80px; padding: 0.5rem; }
.variants-table .remove-variant-btn { padding: 0.25rem 0.5rem; font-size: 1.2rem; line-height: 1; }
.flash { padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border: 1px solid transparent; transition: opacity 0.5s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
.flash.success { background-color: rgba(212, 237, 218, 0.9); color: #155724; border-color: rgba(195, 230, 203, 0.9); }
.flash.error { background-color: rgba(248, 215, 218, 0.9); color: #721c24; border-color: rgba(245, 198, 203, 0.9); }

/* This is the new scrollable container for your form sections */
.modal-body {
  flex-grow: 1; /* Allows this element to grow and take up available space */
  overflow-y: auto; /* Adds a vertical scrollbar ONLY when needed */
  padding: 1.5rem 0.5rem; /* Adjusted padding */
}

/* Ensure header and footer don't shrink */
.modal-header, .modal-footer {
  flex-shrink: 0;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    padding-top: 1.5rem;
    margin-top: auto; /* Pushes footer to the bottom */
    border-top: 1px solid var(--border-color);
    padding: 1.5rem 0 0 0; /* Adjusted padding */
}


/* --- Master Data Modal Styles --- */
.master-data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
.master-list { display: flex; flex-direction: column; gap: 0.5rem; max-height: 300px; overflow-y: auto; padding-right: 0.5rem; margin-bottom: 1.5rem; }
.master-item { display: flex; align-items: center; gap: 1rem; padding: 0.5rem; border-radius: 6px; transition: background-color 0.2s ease; }
.master-item:hover { background-color: rgba(0,0,0,0.05); }
body.dark-mode .master-item:hover { background-color: rgba(255,255,255,0.05); }
.master-item-input { flex-grow: 1; border: 1px solid transparent; background: transparent; padding: 0.5rem; border-radius: 6px; }
.master-item-input:not([readonly]) { border-color: var(--primary-color); background: var(--card-bg); }
.master-item-actions { display: flex; gap: 0.25rem; }
.icon-btn { padding: 0.5rem; background: transparent; box-shadow: none; color: var(--subtle-text-color); }
.icon-btn:hover { background: rgba(0,0,0,0.1); color: var(--text-color); }
body.dark-mode .icon-btn:hover { background: rgba(255,255,255,0.1); color: var(--text-color); }
.icon-btn.danger:hover { color: var(--danger-color); background: rgba(229, 62, 62, 0.1); }
.add-new-form { display: flex; gap: 0.5rem; margin-top: 1rem; border-top: 1px solid var(--border-color); padding-top: 1.5rem; }
.add-new-input { flex-grow: 1; }

/* --- Adaptive & Responsive Styles --- */
@media (max-width: 992px) {
    .container { padding: 0 1.5rem; }
}
@media (max-width: 768px) {
    .container { padding: 0 1rem; }
    .main-header { padding: 0 1rem; }
    .form-card { padding: 1.5rem; }
    .form-row { flex-direction: column; gap: 1.25rem; }
    .modal-content { width: 95%; padding: 1.5rem; }
    .page-header { flex-direction: column; align-items: stretch; gap: 1.5rem; }
    .header-left, .search-container, .search-input-wrapper, .header-actions { width: 100%; }
    .header-actions { justify-content: center; }
    .inventory-table thead { display: none; }
    .inventory-table, .inventory-table tbody, .inventory-table tr, .inventory-table td { display: block; }
    .inventory-table tr.item-row { border-radius: 12px; background: var(--table-row-bg); padding: 1rem; margin-bottom: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    .inventory-table td { padding: 0.5rem 0; border: none; display: flex; align-items: center; gap: 1rem; }
    .inventory-table td:before { content: attr(data-label); font-weight: 600; width: 100px; min-width: 100px; color: var(--subtle-text-color); }
    .inventory-table td[data-label=""] { display: none; }
    .variant-details-row { display: block !important; margin-bottom: 1rem; }
    .variant-details-container { padding: 1rem 0; background: transparent; }
}
/* Paste this at the end of your CSS file */
/* ... and the other styles (.threshold-text, .hidden, etc.) ... */
/* Make the cell's container a positioning parent for the tooltip */
.variant-cell-compact {
  position: relative;
}

/* This is the tooltip (the "hover tag") */
.variant-cell-compact::after {
  content: attr(data-threshold); /* Pulls text from the data-threshold attribute */
  position: absolute;
  
  /* Positioning */
  bottom: 100%; /* Position it above the element */
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 8px; /* Space between element and tooltip */
  
  /* Styling */
  background-color: #333;
  color: #fff;
  padding: 5px 10px;
  border-radius: 4px;
  font-size: 0.85em;
  white-space: nowrap; /* Keep it on one line */
  
  /* Initially hidden */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
  pointer-events: none; /* Prevents the tooltip from interfering with mouse events */
}

/* This makes the tooltip visible on hover */
.variant-cell-compact:hover::after {
  opacity: 1;
  visibility: visible;
}

@media (max-width: 768px) {
  /* Change the form rows to stack vertically instead of side-by-side */
  .form-row {
    flex-direction: column;
    gap: 0; /* Remove the gap between stacked items if you have one */
  }

  /* Ensure form fields take up the full width and have some space */
  .form-field {
    width: 100%;
    margin-bottom: 1rem;
  }
}

.item-image-thumbnail {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  object-fit: cover;
  margin-right: 1rem;
}

/* --- Import Modal Specific Styles --- */
#import-step-1, #import-step-2 {
  padding: 1rem 0.5rem; /* Add horizontal padding */
}

#import-step-1 .form-field {
    margin-bottom: 1rem;
}

#import-step-1 h4, #import-step-2 h4 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-weight: 600;
}

#import-step-1 p, #import-step-2 p {
  margin-top: 0;
  margin-bottom: 1.5rem;
  color: var(--subtle-text-color);
  font-size: 0.95rem;
}

#import-preview-container {
  max-height: 45vh;
  overflow-y: auto;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  margin-top: 1rem;
}

#import-preview-container .inventory-table {
  border-spacing: 0;
}

#import-preview-container .inventory-table th {
  position: sticky;
  top: 0;
  background: var(--card-bg);
  z-index: 1;
}

#import-preview-container .inventory-table th select {
  width: 100%;
  min-width: 150px;
  padding: 0.5rem;
  font-size: 0.9rem;
}

.input-with-buttons {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.input-with-buttons .select2-container {
    flex-grow: 1;
}

.button-icon {
    padding: 0.5rem;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--subtle-text-color);
}

.button-icon:hover {
    background-color: var(--button-cancel-hover-bg);
    color: var(--text-color);
}

/* --- Pagination --- */
.pagination-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    margin-top: 2rem;
}
.pagination-controls .button {
    padding: 0.5rem 1rem;
    min-width: 40px;
    background-color: var(--button-cancel-bg);
    color: var(--subtle-text-color);
    border-color: var(--border-color);
}
.pagination-controls .button:hover {
    background-color: var(--button-cancel-hover-bg);
    border-color: var(--subtle-text-color);
}
.pagination-controls .button.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}
.pagination-ellipsis {
    color: var(--subtle-text-color);
    padding: 0 0.5rem;
}

/* Styles for the inline edit form */
.edit-form-row td {
    padding: 0 !important;
    background-color: var(--table-nested-bg, #f9fafb);
}

body.dark-mode .edit-form-row td {
    background-color: var(--table-nested-bg, #2d3748);
}

.edit-item-form {
    padding: 1.5rem;
    border-radius: 12px;
    background-color: var(--card-bg);
}

.edit-item-form h4 {
    margin-top: 0;
    margin-bottom: 1.5rem;
}

.edit-item-form .form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-color);
}

.edit-item-form .variants-modal-table {
    width: 100%;
    margin-top: 1rem;
}

/* --- Low Stock Report Modal --- */
#low-stock-report-modal .modal-content.large {
  max-width: 1100px; /* Widen modal to fit all columns */
}

#low-stock-report-modal .modal-body {
  max-height: 70vh; /* Ensure the body has a constrained height to allow scrolling */
  padding: 0; /* Remove padding to allow table to fill the space */
}

#low-stock-report-modal .table-wrapper {
    overflow-y: auto;
    max-height: 70vh;
}

#low-stock-report-modal .inventory-table {
    border-spacing: 0; /* Remove spacing for a cleaner look */
}

#low-stock-report-modal .inventory-table th {
  position: sticky;
  top: 0; /* Stick to the very top of the scrolling container */
  background: var(--card-bg); /* Use card-bg for a slight contrast if different from modal-bg */
  z-index: 10;
  box-shadow: 0 2px 4px var(--shadow-color); /* Add subtle shadow for depth */
}

body.dark-mode #low-stock-report-modal .inventory-table th {
    background: var(--modal-bg);
}

#low-stock-report-modal .inventory-table td {
    border-bottom: 1px solid var(--border-color);
    padding: 1rem 1.25rem;
}

#low-stock-report-modal .inventory-table tbody tr:nth-child(even) {
    background-color: var(--bg-color);
}

#low-stock-report-modal .inventory-table tbody tr:hover {
    background-color: color-mix(in srgb, var(--primary-color) 10%, transparent);
}

/* --- PO Item Row Detailed Styles --- */
.po-item-row-detailed {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    margin-bottom: 1rem;
    background-color: var(--bg-color);
}

.po-item-details {
    flex-grow: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 0.5rem;
    font-size: 0.9rem;
}

.po-item-detail-field {
    color: var(--subtle-text-color);
}

.po-item-detail-field strong {
    color: var(--text-color);
}

.po-item-inputs {
    display: flex;
    gap: 0.5rem;
    width: 200px;
}

/* --- PO Modal Responsive Layout --- */
.po-items-header {
    display: flex;
    justify-content: space-between;
    padding: 0 1rem 0.5rem 1rem;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 1rem;
    font-weight: 600;
    color: var(--subtle-text-color);
    font-size: 0.9rem;
}

.po-header-details { flex: 1; }
.po-header-quantity, .po-header-rate { width: 100px; text-align: center; }
.po-header-action { width: 50px; text-align: center; }

.po-item-row-detailed {
    align-items: flex-start; /* Align items to the top */
}

.po-item-inputs {
    flex-shrink: 0; /* Prevent inputs from shrinking */
    width: auto; /* Let inputs define their own width */
}

.po-item-inputs input {
    width: 80px; /* Set a fixed width for quantity and rate inputs */
}

.remove-po-item-btn {
    height: 100%;
}

/* Responsive adjustments for smaller screens */
@media (max-width: 768px) {
    .po-items-header { display: none; } /* Hide header on mobile */

    .po-item-row-detailed {
        flex-direction: column;
        align-items: stretch;
    }

    .po-item-details {
        grid-template-columns: 1fr; /* Stack details vertically */
        gap: 0.5rem;
        margin-bottom: 1rem;
    }

    .po-item-inputs {
        display: flex;
        justify-content: space-between;
        width: 100%;
        gap: 1rem;
    }

    .po-item-inputs input {
        width: 48%; /* Make inputs take up half the width */
    }

.remove-po-item-btn {
        margin-top: 1rem;
        align-self: flex-end;
    }
}

/* --- PO Variant Checklist Fix --- */
.po-variant-checkbox {
    -webkit-appearance: checkbox;
    -moz-appearance: checkbox;
    appearance: checkbox;
    width: auto; /* Override the 100% width from the global input style */
}

#po-item-search-container {
    padding: 1rem;
    margin-top: 1rem;
    border-top: 1px solid var(--border-color);
}
