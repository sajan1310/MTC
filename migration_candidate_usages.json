{
  "__future__": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\config.py",
      "line": 8,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models.py",
      "line": 1,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 1,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 8,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\db_explain.py",
      "line": 10,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\test_project_audit.py",
      "line": 252,
      "snippet": "missing_reqs = sorted([imp for imp in imports if imp not in reqs and imp not in (\"__future__\", \"os\", \"sys\", \"re\", \"json\", \"pathlib\", \"typing\")])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\reports.py",
      "line": 25,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\stubs.py",
      "line": 11,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\auth\\routes.py",
      "line": 1,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 1,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 20,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\production_lot.py",
      "line": 14,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\user.py",
      "line": 3,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\costing_service.py",
      "line": 23,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\inventory_alert_service.py",
      "line": 12,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 16,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 9,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\subprocess_service.py",
      "line": 12,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 7,
      "snippet": "from __future__ import annotations"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\validators\\production_lot_validator.py",
      "line": 8,
      "snippet": "from __future__ import annotations"
    }
  ],
  "__init__": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app.py",
      "line": 18,
      "snippet": "_init_py = os.path.join(_pkg_dir, \"__init__.py\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 16,
      "snippet": "def __init__(self):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\models.py",
      "line": 7,
      "snippet": "def __init__(self, user_data):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\run_migration.py",
      "line": 19,
      "snippet": "def __init__(self):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models.py",
      "line": 9,
      "snippet": "def __init__(self, user_data):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migrations.py",
      "line": 17,
      "snippet": "def __init__(self):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 495,
      "snippet": "def __init__(self):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\conftest.py",
      "line": 93,
      "snippet": "def __init__(self):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 20,
      "snippet": "# Import api_bp from __init__ after it's been defined"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 34,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 92,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 129,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 158,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 199,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 242,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 269,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 304,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 335,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 364,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 412,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 464,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\production_lot.py",
      "line": 28,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\production_lot.py",
      "line": 85,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\production_lot.py",
      "line": 129,
      "snippet": "def __init__(self, data: Dict[str, Any]):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\user.py",
      "line": 11,
      "snippet": "def __init__(self, user_data):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 37,
      "snippet": "def __init__(self, poll_interval: int = 5, max_retries: int = 3):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 44,
      "snippet": "def __init__(self, batch_size: int = DEFAULT_BATCH_SIZE):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\progress_tracker.py",
      "line": 48,
      "snippet": "def __init__("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\validators\\import_validators.py",
      "line": 27,
      "snippet": "def __init__(self, field: str, message: str, value: Any = None):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\validators\\import_validators.py",
      "line": 31,
      "snippet": "super().__init__(f\"{field}: {message}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\APP_PY_CLEANUP_REPORT.md",
      "line": 41,
      "snippet": "_spec = importlib.util.spec_from_file_location(\"app\", \"app/__init__.py\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\APP_PY_CLEANUP_REPORT.md",
      "line": 110,
      "snippet": "- All Flask application initialization happens in `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\CHANGELOG.md",
      "line": 32,
      "snippet": "- **app/__init__.py**: Refactored with Redis pooling, enhanced CSRF, blueprint registration"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 90,
      "snippet": "- `app/__init__.py` - Implemented Redis connection pooling"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 158,
      "snippet": "\u2502   \u251c\u2500\u2500 __init__.py          # Centralized model exports"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 162,
      "snippet": "\u2502   \u251c\u2500\u2500 __init__.py          # Auth blueprint"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 166,
      "snippet": "\u2502   \u251c\u2500\u2500 __init__.py          # API blueprint"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 174,
      "snippet": "\u2502   \u251c\u2500\u2500 __init__.py"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 178,
      "snippet": "\u2502   \u251c\u2500\u2500 __init__.py"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 183,
      "snippet": "\u2514\u2500\u2500 __init__.py              # Application factory"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 235,
      "snippet": "- `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 433,
      "snippet": "- `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 462,
      "snippet": "- `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 878,
      "snippet": "- `app/__init__.py` - ProxyFix, PREFERRED_URL_SCHEME"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\IMPLEMENTATION_COMPLETE.md",
      "line": 26,
      "snippet": "2. `app/api/__init__.py` - Registered stubs module to api_bp blueprint"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\IMPLEMENTATION_COMPLETE.md",
      "line": 90,
      "snippet": "# - The module replacement at line 36 redirects all imports to app/__init__.py"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\IMPLEMENTATION_COMPLETE.md",
      "line": 286,
      "snippet": "1. \u2705 `app/api/__init__.py` - Registered stubs module"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\IMPLEMENTATION_ROADMAP.md",
      "line": 353,
      "snippet": "- [ ] Register all blueprints in `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 325,
      "snippet": "In `app/__init__.py`, add:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\SESSION_AUTH_FIX.md",
      "line": 32,
      "snippet": "**File:** `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\SESSION_AUTH_FIX.md",
      "line": 120,
      "snippet": "- \u2705 `app/__init__.py` - Added unauthorized handler"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\SYNC_ANALYSIS_REPORT.md",
      "line": 259,
      "snippet": "- Cross-reference with app/__init__.py module replacement"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UNIVERSAL_PROCESS_FRAMEWORK_PROGRESS.md",
      "line": 348,
      "snippet": "- [ ] Register new blueprints in `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UNIVERSAL_PROCESS_FRAMEWORK_PROGRESS.md",
      "line": 535,
      "snippet": "\u2502   \u2502   \u2514\u2500\u2500 __init__.py                               \u2705 Updated"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UPF_API_IMPLEMENTATION_COMPLETE.md",
      "line": 201,
      "snippet": "**File:** `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PRODUCTION_READINESS.md",
      "line": 98,
      "snippet": "Add to `app/__init__.py`:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PRODUCTION_READINESS.md",
      "line": 473,
      "snippet": "# app/__init__.py"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PRODUCTION_READINESS.md",
      "line": 499,
      "snippet": "# app/__init__.py"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\SECURITY.md",
      "line": 71,
      "snippet": "**Enabled globally via `CSRFProtect()`** in `app/__init__.py`."
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\TECHNICAL_DEBT.md",
      "line": 11,
      "snippet": "- Module replacement in line 36 redirects imports to `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\UPF_INVENTORY_ALERTS_USAGE.md",
      "line": 290,
      "snippet": "The `inventory_alerts_bp` blueprint is already registered in `app/__init__.py`:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\UPF_INVENTORY_ALERTS_USAGE.md",
      "line": 344,
      "snippet": "2. Verify blueprint registration in `app/__init__.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\UPF_INVENTORY_ALERTS_USAGE.md",
      "line": 354,
      "snippet": "3. Ensure blueprint registered: `grep \"main_bp\" app/__init__.py`"
    }
  ],
  "alert_summary_json": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_fix_update_lot_inventory_status_function.py",
      "line": 34,
      "snippet": "UPDATE production_lots SET alert_summary_json = ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_fix_update_lot_inventory_status_function.py",
      "line": 76,
      "snippet": "UPDATE production_lots SET alert_summary_json = ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system_temp.py",
      "line": 88,
      "snippet": "ALTER TABLE production_lots ADD COLUMN IF NOT EXISTS alert_summary_json JSONB DEFAULT '{}';"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system_temp.py",
      "line": 105,
      "snippet": "-- Update alert_summary_json"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system_temp.py",
      "line": 106,
      "snippet": "UPDATE production_lots SET alert_summary_json = ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system_temp.py",
      "line": 153,
      "snippet": "ALTER TABLE production_lots DROP COLUMN IF EXISTS alert_summary_json;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\inventory_alert_service.py",
      "line": 414,
      "snippet": "\"SELECT lot_status_inventory, alert_summary_json FROM production_lots WHERE id = %s\","
    }
  ],
  "cost_items_data": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 346,
      "snippet": "cost_items_data AS ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 423,
      "snippet": "LEFT JOIN cost_items_data cid ON cid.process_subprocess_id = si.ps_id"
    }
  ],
  "count_query": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 676,
      "snippet": "count_query = base_query.replace(\"SELECT sr.*, s.firm_name\", \"SELECT COUNT(*) as total\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 677,
      "snippet": "# remove ORDER BY from count_query if present"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 678,
      "snippet": "if \" ORDER BY \" in count_query:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 679,
      "snippet": "count_query = count_query.split(\" ORDER BY \")[0]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 680,
      "snippet": "cur.execute(count_query, tuple(params))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1039,
      "snippet": "count_query = f\"SELECT COUNT(i.item_id) {base_query} {where_clause}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1040,
      "snippet": "cur.execute(count_query, tuple(params))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1289,
      "snippet": "count_query = f\"\"\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1301,
      "snippet": "cur.execute(count_query, params)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1467,
      "snippet": "count_query = f\"\"\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1479,
      "snippet": "cur.execute(count_query, params)"
    }
  ],
  "flask_cors": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 13,
      "snippet": "from flask_cors import CORS"
    }
  ],
  "flask_limiter": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 14,
      "snippet": "from flask_limiter import Limiter"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 15,
      "snippet": "from flask_limiter.util import get_remote_address"
    }
  ],
  "flask_login": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\models.py",
      "line": 1,
      "snippet": "from flask_login import UserMixin"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models.py",
      "line": 3,
      "snippet": "from flask_login import UserMixin"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 8,
      "snippet": "from flask_login import current_user"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 16,
      "snippet": "from flask_login import LoginManager"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\file_routes.py",
      "line": 11,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\inventory_alerts.py",
      "line": 13,
      "snippet": "from flask_login import login_required, current_user"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 12,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\production_lot.py",
      "line": 16,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\reports.py",
      "line": 28,
      "snippet": "from flask_login import login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 13,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\stubs.py",
      "line": 17,
      "snippet": "from flask_login import login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\subprocess_management.py",
      "line": 9,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 11,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\auth\\decorators.py",
      "line": 6,
      "snippet": "from flask_login import current_user"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\auth\\routes.py",
      "line": 20,
      "snippet": "from flask_login import current_user, login_required, login_user, logout_user"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 20,
      "snippet": "from flask_login import current_user, login_required"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\user.py",
      "line": 5,
      "snippet": "from flask_login import UserMixin"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\audit_service.py",
      "line": 12,
      "snippet": "from flask_login import current_user"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 268,
      "snippet": "from flask_login import login_required, current_user"
    }
  ],
  "flask_wtf": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 17,
      "snippet": "from flask_wtf import CSRFProtect"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\__init__.py",
      "line": 18,
      "snippet": "from flask_wtf.csrf import CSRFError"
    }
  ],
  "generate_series": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 134,
      "snippet": "FROM generate_series(CURRENT_DATE - INTERVAL '29 days', CURRENT_DATE, '1 day') as date_series(day)"
    }
  ],
  "groups_data": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 364,
      "snippet": "groups_data AS ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 424,
      "snippet": "LEFT JOIN groups_data gd ON gd.process_subprocess_id = si.ps_id"
    }
  ],
  "item_id": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 50,
      "snippet": "# Get all item_ids for this duplicate set"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 53,
      "snippet": "SELECT item_id FROM item_master"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 55,
      "snippet": "ORDER BY item_id;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 60,
      "snippet": "item_ids = [row[0] for row in cur.fetchall()]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 63,
      "snippet": "id_to_keep = item_ids[0]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 64,
      "snippet": "ids_to_delete = item_ids[1:]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 66,
      "snippet": "print(f\"  Keeping item_id: {id_to_keep}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 67,
      "snippet": "print(f\"  Deleting item_ids: {ids_to_delete}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 70,
      "snippet": "for item_id in ids_to_delete:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 71,
      "snippet": "print(f\"  Re-associating records from {item_id} to {id_to_keep}...\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 78,
      "snippet": "SET item_id = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 79,
      "snippet": "WHERE item_id = %s;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 81,
      "snippet": "(id_to_keep, item_id),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 83,
      "snippet": "print(f\"    Re-associated variants from item_id {item_id}.\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 86,
      "snippet": "f\"    Could not re-associate variants for item_id {item_id}: {e}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 94,
      "snippet": "cur.execute(\"DELETE FROM item_master WHERE item_id = %s;\", (item_id,))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\deduplicate_items.py",
      "line": 96,
      "snippet": "f\"    Deleted duplicate item_master record for item_id {item_id}.\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\test_variants.py",
      "line": 66,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 101,
      "snippet": "\"SELECT item_id FROM item_master WHERE name=%s AND model_id=%s AND variation_id=%s AND COALESCE(description,'')=%s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 108,
      "snippet": "\"INSERT INTO item_master(name, model_id, variation_id, description) VALUES(%s,%s,%s,%s) RETURNING item_id\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_performance_indexes.py",
      "line": 15,
      "snippet": "\"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_item_variant_item_id ON item_variant(item_id);\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_performance_indexes.py",
      "line": 16,
      "snippet": "\"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_item_variant_composite ON item_variant(item_id, color_id, size_id);\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_performance_indexes.py",
      "line": 17,
      "snippet": "\"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_supplier_rates_item_supplier ON supplier_item_rates(item_id, supplier_id);\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_performance_indexes.py",
      "line": 18,
      "snippet": "\"CREATE UNIQUE INDEX CONCURRENTLY IF NOT EXISTS idx_supplier_rates_unique ON supplier_item_rates(item_id, supplier_id, effective_date);\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_performance_indexes.py",
      "line": 22,
      "snippet": "\"CREATE INDEX CONCURRENTLY IF NOT EXISTS idx_stock_item_date ON stock_ledger(item_id, transaction_date DESC);\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_performance_indexes.py",
      "line": 37,
      "snippet": "\"DROP INDEX CONCURRENTLY IF EXISTS idx_item_variant_item_id;\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_suppliers_tables.py",
      "line": 41,
      "snippet": "item_id INTEGER NOT NULL REFERENCES item_master(item_id) ON DELETE CASCADE,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_suppliers_tables.py",
      "line": 43,
      "snippet": "UNIQUE(supplier_id, item_id)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_suppliers_tables.py",
      "line": 60,
      "snippet": "po_item_id SERIAL PRIMARY KEY,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 170,
      "snippet": "ON item_variant(item_id, color_id, size_id)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 173,
      "snippet": "print(\"\u2705 Created unique index on item_variant(item_id, color_id, size_id)\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 108,
      "snippet": "JOIN item_master i ON v.item_id = i.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 116,
      "snippet": "WHERE item_id = v.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 224,
      "snippet": "\"INSERT INTO item_master (name) VALUES (%s) ON CONFLICT DO NOTHING RETURNING item_id\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 230,
      "snippet": "\"SELECT item_id FROM item_master WHERE name = %s\", (\"Test Item\",)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 234,
      "snippet": "item_id = row[\"item_id\"] if isinstance(row, dict) else row[0]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 261,
      "snippet": "\"INSERT INTO item_variant (item_id, color_id, size_id, opening_stock, threshold, unit) VALUES (%s,%s,%s,%s,%s,%s) ON CONFLICT DO NOTHING RETURNING variant_id\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 262,
      "snippet": "(item_id, color_id, size_id, 5, 2, \"pcs\"),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 267,
      "snippet": "\"SELECT variant_id FROM item_variant WHERE item_id=%s AND color_id=%s AND size_id=%s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 268,
      "snippet": "(item_id, color_id, size_id),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 149,
      "snippet": "cur.execute(\"SELECT item_id FROM item_master WHERE name=%s LIMIT 1\", (\"Test Item\",))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 152,
      "snippet": "item_id = ir[\"item_id\"] if isinstance(ir, dict) else ir[0]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 154,
      "snippet": "cur.execute(\"INSERT INTO item_master (name, description) VALUES (%s,%s) RETURNING item_id\", (\"Test Item\", \"Seed\"))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 155,
      "snippet": "item_id = cur.fetchone()[\"item_id\"]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 160,
      "snippet": "INSERT INTO item_variant (item_id, color_id, size_id, opening_stock, threshold, unit)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 163,
      "snippet": "(item_id, color_id, size_id, 100, 5, \"pcs\"),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 210,
      "snippet": "\"item_id\": variant_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 848,
      "snippet": "{\"id\": int, \"item_id\": int, \"quantity\": int, \"unit\": str, \"is_alternative\": bool}"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 874,
      "snippet": "SELECT g.id as group_id, vu.id, vu.variant_id as item_id, vu.quantity,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 891,
      "snippet": "\"item_id\": vr.get(\"item_id\"),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\production_lot.py",
      "line": 291,
      "snippet": "vu.item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\production_lot.py",
      "line": 302,
      "snippet": "JOIN item_variant iv ON iv.item_id = vu.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 71,
      "snippet": "f\"/{plural_name}/<int:item_id>\", methods=[\"PUT\"], endpoint=update_endpoint"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 75,
      "snippet": "def update_entity(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 87,
      "snippet": "cur.execute(query, (name, item_id))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 93,
      "snippet": "current_app.logger.error(f\"API Error updating {entity_name} {item_id}: {e}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 97,
      "snippet": "f\"/{plural_name}/<int:item_id>\", methods=[\"DELETE\"], endpoint=delete_endpoint"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 101,
      "snippet": "def delete_entity(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 107,
      "snippet": "cur.execute(query, (item_id,))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 112,
      "snippet": "current_app.logger.error(f\"API Error deleting {entity_name} {item_id}: {e}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 355,
      "snippet": "\"SELECT sir.rate_id, sir.rate, im.item_id, im.name as item_name FROM supplier_item_rates sir JOIN item_master im ON sir.item_id = im.item_id WHERE sir.supplier_id = %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 372,
      "snippet": "item_id = data.get(\"item_id\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 374,
      "snippet": "if not item_id or not rate:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 379,
      "snippet": "\"INSERT INTO supplier_item_rates (supplier_id, item_id, rate) VALUES (%s, %s, %s) RETURNING rate_id\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 380,
      "snippet": "(supplier_id, item_id, rate),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 482,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 559,
      "snippet": "INSERT INTO supplier_item_rates (supplier_id, item_id, rate)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 560,
      "snippet": "SELECT %s, item_id, %s FROM item_variant WHERE variant_id = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 561,
      "snippet": "ON CONFLICT (supplier_id, item_id) DO UPDATE SET rate = EXCLUDED.rate"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 653,
      "snippet": "\"EXISTS (SELECT 1 FROM stock_entries se JOIN item_variant iv ON se.variant_id = iv.variant_id JOIN item_master im ON iv.item_id = im.item_id WHERE se.receipt_id = sr.receipt_id AND (LOWER(im.name) LIKE LOWER(%s) OR CAST(iv.variant_id AS TEXT) LIKE %s))\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 711,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 847,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 922,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1022,
      "snippet": "SELECT item_id, COUNT(*) as variant_count, SUM(opening_stock) as total_stock, SUM(threshold) as total_threshold, BOOL_OR(opening_stock <= threshold) as has_low_stock_variants"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1023,
      "snippet": "FROM item_variant GROUP BY item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1024,
      "snippet": ") as variant_summary ON i.item_id = variant_summary.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1039,
      "snippet": "count_query = f\"SELECT COUNT(i.item_id) {base_query} {where_clause}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1043,
      "snippet": "SELECT i.item_id, i.name, mm.model_name as model, vm.variation_name as variation, i.description, i.image_path,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1057,
      "snippet": "\"id\": item[\"item_id\"],"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1130,
      "snippet": "\"SELECT item_id FROM item_master WHERE name = %s AND model_id = %s AND variation_id = %s AND COALESCE(description, '') = %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1140,
      "snippet": "\"INSERT INTO item_master (name, model_id, variation_id, description, image_path) VALUES (%s, %s, %s, %s, %s) RETURNING item_id\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1149,
      "snippet": "item_id = cur.fetchone()[0]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1159,
      "snippet": "\"INSERT INTO item_variant (item_id, color_id, size_id, opening_stock, threshold, unit) VALUES (%s, %s, %s, %s, %s, %s)\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1161,
      "snippet": "item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1170,
      "snippet": "return jsonify({\"message\": \"Item saved successfully\", \"item_id\": item_id}), 201"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1183,
      "snippet": "@api_bp.route(\"/items/<int:item_id>\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1185,
      "snippet": "def get_item(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1193,
      "snippet": "SELECT i.item_id, i.name, mm.model_name as model, vm.variation_name as variation, i.description, i.image_path"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1197,
      "snippet": "WHERE i.item_id = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1199,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1206,
      "snippet": "\"id\": item[\"item_id\"],"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1215,
      "snippet": "current_app.logger.error(f\"Error fetching item {item_id}: {e}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1231,
      "snippet": "\"SELECT i.item_id, i.name, mm.model_name as model, vm.variation_name as variation, i.description FROM item_master i LEFT JOIN model_master mm ON i.model_id = mm.model_id LEFT JOIN variation_master vm ON i.variation_id = vm.variation_id WHERE i.name = %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1292,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1307,
      "snippet": "iv.item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1322,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1340,
      "snippet": "\"item_id\": row[\"item_id\"],"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1374,
      "snippet": "iv.item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1389,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1405,
      "snippet": "\"item_id\": row[\"item_id\"],"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1470,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1496,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1561,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1585,
      "snippet": "\"SELECT s.firm_name as supplier_name, sir.rate FROM supplier_item_rates sir JOIN suppliers s ON sir.supplier_id = s.supplier_id WHERE sir.item_id = (SELECT item_id FROM item_variant WHERE variant_id = %s) ORDER BY sir.rate ASC\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1608,
      "snippet": "\"SELECT rate FROM supplier_item_rates WHERE item_id = (SELECT item_id FROM item_variant WHERE variant_id = %s) AND supplier_id = %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1664,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1665,
      "snippet": "LEFT JOIN supplier_item_rates sir ON sir.item_id = iv.item_id AND sir.supplier_id = sr.supplier_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1678,
      "snippet": "@api_bp.route(\"/items/<int:item_id>\", methods=[\"PUT\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1681,
      "snippet": "def update_item(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1682,
      "snippet": "if not isinstance(item_id, int) or item_id <= 0:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1763,
      "snippet": "\"SELECT item_id FROM item_master WHERE name = %s AND model_id = %s AND variation_id = %s AND COALESCE(description, '') = %s AND item_id != %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1769,
      "snippet": "item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1788,
      "snippet": "values = list(update_fields.values()) + [item_id]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1790,
      "snippet": "sql.Identifier(\"item_master\"), set_clause, sql.Identifier(\"item_id\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1804,
      "snippet": "\"INSERT INTO item_variant (item_id, color_id, size_id, opening_stock, threshold, unit) VALUES (%s, %s, %s, %s, %s, %s)\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1806,
      "snippet": "item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1852,
      "snippet": "SELECT i.item_id, i.name, mm.model_name as model, vm.variation_name as variation, i.description, i.image_path,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1853,
      "snippet": "(SELECT COUNT(*) FROM item_variant v WHERE v.item_id = i.item_id) as variant_count,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1854,
      "snippet": "(SELECT COALESCE(SUM(v.opening_stock), 0) FROM item_variant v WHERE v.item_id = i.item_id) as total_stock,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1855,
      "snippet": "EXISTS (SELECT 1 FROM item_variant v_check WHERE v_check.item_id = i.item_id AND v_check.opening_stock <= v_check.threshold) as has_low_stock_variants"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1856,
      "snippet": "FROM item_master i LEFT JOIN model_master mm ON i.model_id = mm.model_id LEFT JOIN variation_master vm ON i.variation_id = vm.variation_id WHERE i.item_id = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1858,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1867,
      "snippet": "\"id\": updated_item_data[\"item_id\"],"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1892,
      "snippet": "current_app.logger.error(f\"Error updating item {item_id}: {e}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1896,
      "snippet": "@api_bp.route(\"/items/<int:item_id>/variants\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1898,
      "snippet": "def get_item_variants(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1907,
      "snippet": "FROM item_variant v JOIN color_master c ON v.color_id = c.color_id JOIN size_master s ON v.size_id = s.size_id WHERE v.item_id = %s ORDER BY c.color_name, s.size_name"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1909,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1935,
      "snippet": "item_ids = data.get(\"item_ids\", [])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1936,
      "snippet": "if not item_ids:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1940,
      "snippet": "cur.execute(\"DELETE FROM item_master WHERE item_id = ANY(%s)\", (item_ids,))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1942,
      "snippet": "return jsonify({\"message\": f\"{len(item_ids)} items deleted successfully.\"}), 200"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1948,
      "snippet": "@api_bp.route(\"/items/<int:item_id>\", methods=[\"DELETE\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1951,
      "snippet": "def delete_item(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1954,
      "snippet": "cur.execute(\"DELETE FROM item_master WHERE item_id = %s\", (item_id,))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1958,
      "snippet": "current_app.logger.error(f\"Error deleting item {item_id}: {e}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1975,
      "snippet": "\"UPDATE item_variant SET opening_stock = %s WHERE variant_id = %s RETURNING item_id, opening_stock, threshold\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1981,
      "snippet": "item_id, updated_stock, threshold = updated_row"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1983,
      "snippet": "\"SELECT SUM(opening_stock) FROM item_variant WHERE item_id = %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1984,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1988,
      "snippet": "\"SELECT EXISTS (SELECT 1 FROM item_variant WHERE item_id = %s AND opening_stock <= threshold)\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1989,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2046,
      "snippet": "@api_bp.route(\"/items/<int:item_id>/variants\", methods=[\"POST\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2049,
      "snippet": "def add_variant(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2060,
      "snippet": "\"INSERT INTO item_variant (item_id, color_id, size_id, opening_stock, threshold, unit) VALUES (%s, %s, %s, %s, %s, %s) RETURNING variant_id\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2062,
      "snippet": "item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2137,
      "snippet": "JOIN item_master im ON iv.item_id = im.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2165,
      "snippet": "JOIN item_master i ON iv.item_id = i.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2397,
      "snippet": "item_id = get_or_create_item_master_id("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2409,
      "snippet": "\"INSERT INTO item_variant(item_id, color_id, size_id, opening_stock, threshold, unit) VALUES(%s, %s, %s, %s, %s, %s) ON CONFLICT(item_id, color_id, size_id) DO UPDATE SET opening_stock = item_variant.opening_stock + EXCLUDED.opening_stock\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 2410,
      "snippet": "(item_id, color_id, size_id, stock, 5, unit),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 68,
      "snippet": "if not data.get(\"item_id\"):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 69,
      "snippet": "return APIResponse.error(\"validation_error\", \"item_id is required\", 400)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 75,
      "snippet": "variant_id=data[\"item_id\"],"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 84,
      "snippet": "f\"Item {data['item_id']}\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 89,
      "snippet": "f\"Variant usage added: item {data['item_id']} to subprocess {data['subprocess_id']}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 221,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 277,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 613,
      "snippet": "@variant_api_bp.route(\"/variant/<int:item_id>/supplier_pricing\", methods=[\"POST\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 616,
      "snippet": "def add_supplier_pricing(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 627,
      "snippet": "item_id=item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 636,
      "snippet": "f\"Supplier pricing added: item {item_id}, supplier {data['supplier_id']}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 644,
      "snippet": "@variant_api_bp.route(\"/variant/<int:item_id>/supplier_pricing\", methods=[\"GET\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 646,
      "snippet": "def get_variant_suppliers(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 649,
      "snippet": "suppliers = VariantService.get_variant_suppliers(item_id)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 729,
      "snippet": "@variant_api_bp.route(\"/variant/<int:item_id>/availability\", methods=[\"GET\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 731,
      "snippet": "def check_variant_availability(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 735,
      "snippet": "availability = VariantService.check_variant_availability(item_id, required_qty)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 108,
      "snippet": "@main_bp.route(\"/edit_item/<int:item_id>\", methods=[\"GET\"])"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 110,
      "snippet": "def edit_item(item_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 120,
      "snippet": "im.item_id,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 131,
      "snippet": "WHERE im.item_id = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 133,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 156,
      "snippet": "WHERE iv.item_id = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 159,
      "snippet": "(item_id,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 165,
      "snippet": "current_app.logger.error(f\"Error fetching item {item_id}: {e}\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\costing_service.py",
      "line": 155,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\costing_service.py",
      "line": 253,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 245,
      "snippet": "item_id = self._upsert_item_master("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 257,
      "snippet": "cur, item_id, color_id, size_id, stock, threshold, unit"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 283,
      "snippet": "item_id of inserted/updated record"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 359,
      "snippet": "RETURNING item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 549,
      "snippet": "item_id: int,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 563,
      "snippet": "item_id: Foreign key to item_master"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 586,
      "snippet": "INSERT INTO item_variant (item_id, color_id, size_id, opening_stock, threshold, unit)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 588,
      "snippet": "ON CONFLICT (item_id, color_id, size_id) {conflict_where}"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 596,
      "snippet": "cur.execute(query, (item_id, color_id, size_id, opening_stock, threshold, unit))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 336,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 397,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 515,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 279,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 309,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 770,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 806,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 525,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 546,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 594,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 652,
      "snippet": "JOIN item_master im ON im.item_id = iv.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_indexes.sql",
      "line": 6,
      "snippet": "CREATE INDEX IF NOT EXISTS idx_item_variant_item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_indexes.sql",
      "line": 7,
      "snippet": "ON item_variant(item_id);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_indexes.sql",
      "line": 10,
      "snippet": "ON item_variant(item_id, opening_stock, threshold);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_indexes.sql",
      "line": 39,
      "snippet": "ON supplier_item_rates(supplier_id, item_id);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 105,
      "snippet": "item_id SERIAL PRIMARY KEY,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 128,
      "snippet": "item_id INTEGER NOT NULL REFERENCES item_master(item_id) ON DELETE CASCADE,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 139,
      "snippet": "CREATE INDEX IF NOT EXISTS idx_item_variant_item_id ON item_variant(item_id);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 141,
      "snippet": "ON item_variant(item_id, color_id, size_id)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 178,
      "snippet": "item_id INTEGER NOT NULL REFERENCES item_master(item_id) ON DELETE CASCADE,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 183,
      "snippet": "UNIQUE(supplier_id, item_id, effective_date)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 187,
      "snippet": "CREATE INDEX IF NOT EXISTS idx_supplier_rates_item ON supplier_item_rates(item_id);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 213,
      "snippet": "po_item_id SERIAL PRIMARY KEY,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\templates\\edit_item.html",
      "line": 52,
      "snippet": "<form id=\"item-form\" class=\"form-layout\" data-item-id=\"{{ item.item_id }}\" enctype=\"multipart/form-data\">"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\inventory.js",
      "line": 503,
      "snippet": "body: JSON.stringify({ item_ids: itemIds }),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\js\\process_editor.js",
      "line": 649,
      "snippet": "item_id: parseInt(variantId),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\js\\process_editor.js",
      "line": 1011,
      "snippet": "data-item-id=\"${variant.item_id}\" style=\"margin-right: 8px;\">"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\js\\process_framework_unified.js",
      "line": 1670,
      "snippet": "item_id: variantId,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\js\\variant_search.js",
      "line": 28,
      "snippet": "const id = variant.id || variant.item_id || variant.itemId || 0;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\js\\variant_search.js",
      "line": 178,
      "snippet": "const id = v.id || v.item_id || 0;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 454,
      "snippet": "\"item_id\": 500,  // From inventory.items table"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 588,
      "snippet": "**POST** `/api/upf/variant/<item_id>/supplier_pricing`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 610,
      "snippet": "**GET** `/api/upf/variant/<item_id>/supplier_pricing`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 681,
      "snippet": "\"item_id\": 500,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 697,
      "snippet": "**GET** `/api/upf/variant/<item_id>/availability?quantity=100`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 707,
      "snippet": "\"item_id\": 500,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 866,
      "snippet": "\"item_id\": 500,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 936,
      "snippet": "\"item_id\": 501,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 124,
      "snippet": "| item_variant | idx_item_variant_item_id | item_id | Regular | Variant queries |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 125,
      "snippet": "| item_variant | idx_item_variant_composite | item_id, color_id, size_id | Composite | Variant uniqueness |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 126,
      "snippet": "| supplier_item_rates | idx_supplier_rates_item_supplier | item_id, supplier_id | Composite | Rate lookups |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 127,
      "snippet": "| supplier_item_rates | idx_supplier_rates_unique | item_id, supplier_id, effective_date | Unique | Prevent duplicates |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 131,
      "snippet": "| stock_ledger | idx_stock_item_date | item_id, transaction_date DESC | Composite | Stock history |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\ENDPOINT_INVENTORY.md",
      "line": 27,
      "snippet": "- GET /api/upf/process_subprocess/<id>/substitute_groups \u2014 \u2705 \u2014 Response: { substitute_groups: [{ id, name, description, variants: [{ id, item_id, quantity, unit, is_alternative }] }] }"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\FRONTEND_DEVELOPER_GUIDE.md",
      "line": 393,
      "snippet": "item_id: itemId,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\FRONTEND_DEVELOPER_GUIDE.md",
      "line": 445,
      "snippet": "card.dataset.itemId = variant.item_id;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_GUIDE.md",
      "line": 111,
      "snippet": "| item_variant | idx_item_variant_item_id | item_id | Regular |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_GUIDE.md",
      "line": 112,
      "snippet": "| item_variant | idx_item_variant_composite | item_id, color_id, size_id | Composite |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_GUIDE.md",
      "line": 113,
      "snippet": "| supplier_item_rates | idx_supplier_rates_item_supplier | item_id, supplier_id | Composite |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_GUIDE.md",
      "line": 114,
      "snippet": "| supplier_item_rates | idx_supplier_rates_unique | item_id, supplier_id, effective_date | Unique |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_GUIDE.md",
      "line": 118,
      "snippet": "| stock_ledger | idx_stock_item_date | item_id, transaction_date DESC | Composite |"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\SYNC_ANALYSIS_REPORT.md",
      "line": 119,
      "snippet": "**Resolution**: \u2705 **Not an issue** - Route exists as `PUT /items/<int:item_id>` in `app/api/routes.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\TASK_4_PRODUCTION_LOT_VARIANT_SELECTION_COMPLETE.md",
      "line": 55,
      "snippet": "\"item_id\": 234,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\TASK_4_PRODUCTION_LOT_VARIANT_SELECTION_COMPLETE.md",
      "line": 276,
      "snippet": "JOIN item_variant iv ON iv.item_id = vu.item_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UPF_CODE_REVIEW_REPORT.md",
      "line": 360,
      "snippet": "\"item_id\": 50,  // Note: \"item_id\" not \"variant_id\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UPF_CODE_REVIEW_REPORT.md",
      "line": 611,
      "snippet": "item_id: variantId,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UPF_FIXES_IMPLEMENTED.md",
      "line": 100,
      "snippet": "item_id: parseInt(variantId),  // Note: item_id, not variant_id"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\LOGGING.md",
      "line": 100,
      "snippet": "2025-01-12 10:15:35,789 WARNING: [xyz789-abc123] Low stock alert: item_id=12, stock=3"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 22,
      "snippet": "- `idx_item_variant_item_id` \u2192 `item_variant(item_id)` \u2014 FK lookup from variant to item"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 23,
      "snippet": "- `idx_item_variant_composite` \u2192 `item_variant(item_id, color_id, size_id)` \u2014 Composite lookup for unique variants"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 24,
      "snippet": "- `idx_item_variant_stock_check` \u2192 `item_variant(item_id, opening_stock, threshold)` \u2014 Stock level queries"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 28,
      "snippet": "- `idx_supplier_item_rates_lookup` \u2192 `supplier_item_rates(supplier_id, item_id)` \u2014 FK composite lookup"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 29,
      "snippet": "- `idx_supplier_rates_item_supplier` \u2192 `supplier_item_rates(item_id, supplier_id)` \u2014 Reverse FK composite"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 30,
      "snippet": "- `idx_supplier_rates_unique` \u2192 UNIQUE `supplier_item_rates(item_id, supplier_id, effective_date)` \u2014 Prevent duplicate rates"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 38,
      "snippet": "- `idx_stock_item_date` \u2192 `stock_ledger(item_id, transaction_date DESC)` \u2014 Ledger queries"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\TECHNICAL_DEBT.md",
      "line": 51,
      "snippet": "- `POST /api/items/<int:item_id>/variants`"
    }
  ],
  "key_column_usage": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_remove_model_uniqueness.py",
      "line": 20,
      "snippet": "JOIN information_schema.key_column_usage AS kcu"
    }
  ],
  "logging_config": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\logging_config.py",
      "line": 61,
      "snippet": "from logging_config import setup_logging"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 461,
      "snippet": "- `logging_config.py` (new)"
    }
  ],
  "pg_class": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 119,
      "snippet": "JOIN pg_class t ON c.conrelid = t.oid"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 127,
      "snippet": "JOIN pg_class t ON c.conrelid = t.oid"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 188,
      "snippet": "SELECT 1 FROM pg_constraint c JOIN pg_class t ON c.conrelid = t.oid"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 72,
      "snippet": "JOIN pg_class t ON c.conrelid = t.oid"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 52,
      "snippet": "JOIN pg_class t ON c.conrelid = t.oid"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 69,
      "snippet": "JOIN pg_class t ON c.conrelid = t.oid"
    }
  ],
  "pg_constraint": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_po_number.py",
      "line": 47,
      "snippet": "IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'unique_po_number') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 118,
      "snippet": "SELECT 1 FROM pg_constraint c"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 126,
      "snippet": "SELECT 1 FROM pg_constraint c"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 188,
      "snippet": "SELECT 1 FROM pg_constraint c JOIN pg_class t ON c.conrelid = t.oid"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 71,
      "snippet": "FROM pg_constraint c"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 51,
      "snippet": "SELECT 1 FROM pg_constraint c"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 68,
      "snippet": "SELECT 1 FROM pg_constraint c"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 109,
      "snippet": "-- SELECT conname, pg_get_constraintdef(oid) FROM pg_constraint WHERE conname='production_lots_status_check';"
    }
  ],
  "pg_database": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\conftest.py",
      "line": 45,
      "snippet": "cur_admin.execute(\"SELECT 1 FROM pg_database WHERE datname = %s;\", (db_name,))"
    }
  ],
  "pg_indexes": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 377,
      "snippet": "FROM pg_indexes"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_indexes.sql",
      "line": 60,
      "snippet": "FROM pg_indexes"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PRODUCTION_READINESS.md",
      "line": 266,
      "snippet": "FROM pg_indexes"
    }
  ],
  "pg_tables": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 203,
      "snippet": "FROM pg_tables"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\QUICK_START_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 39,
      "snippet": "FROM pg_tables"
    }
  ],
  "pg_trigger": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 387,
      "snippet": "FROM pg_trigger"
    }
  ],
  "private_uploads": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\file_routes.py",
      "line": 26,
      "snippet": "- Files are served from private_uploads directory only"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\file_routes.py",
      "line": 32,
      "snippet": "uploads_dir = os.path.join(current_app.root_path, \"..\", \"private_uploads\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\file_routes.py",
      "line": 71,
      "snippet": "(f\"private_uploads/{filename}\",),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\file_routes.py",
      "line": 124,
      "snippet": "uploads_dir = os.path.join(current_app.root_path, \"..\", \"private_uploads\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1103,
      "snippet": "uploads_dir = os.path.join(current_app.root_path, \"..\", \"private_uploads\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1116,
      "snippet": "image_path = f\"private_uploads/{filename}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1699,
      "snippet": "uploads_dir = os.path.join(current_app.root_path, \"..\", \"private_uploads\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1712,
      "snippet": "image_path = f\"private_uploads/{filename}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 246,
      "snippet": "uploads_dir = os.path.join(current_app.root_path, \"..\", \"private_uploads\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\main\\routes.py",
      "line": 257,
      "snippet": "profile_path = f\"private_uploads/{filename}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\CHANGELOG.md",
      "line": 80,
      "snippet": "- **Private File Storage**: Files stored in private_uploads/ with 600 permissions"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 824,
      "snippet": "Storage Location: private_uploads/ (outside web root)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 834,
      "snippet": "Path: private_uploads/7c9e6679-7425-40de-944b-e07fc1f90ae7_user_photo.jpg"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPLETE_CHANGE_LOG.md",
      "line": 852,
      "snippet": "return send_from_directory('private_uploads', filename)"
    }
  ],
  "subprocess_ids": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\database.py",
      "line": 223,
      "snippet": "def create_process_with_subprocesses(conn, cur, name, subprocess_ids):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\database.py",
      "line": 226,
      "snippet": "for sp_id in subprocess_ids:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 305,
      "snippet": "WITH subprocess_ids AS ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 341,
      "snippet": "WHERE vu.process_subprocess_id IN (SELECT ps_id FROM subprocess_ids)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 360,
      "snippet": "WHERE ci.process_subprocess_id IN (SELECT ps_id FROM subprocess_ids)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 375,
      "snippet": "WHERE sg.process_subprocess_id IN (SELECT ps_id FROM subprocess_ids)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 398,
      "snippet": "WHERE sg.process_subprocess_id IN (SELECT ps_id FROM subprocess_ids)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 412,
      "snippet": "WHERE pt.process_subprocess_id IN (SELECT ps_id FROM subprocess_ids)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 421,
      "snippet": "FROM subprocess_ids si"
    }
  ],
  "supplier_ledger": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_supplier_ledger_view.py",
      "line": 2,
      "snippet": "Migration: Create supplier_ledger view and add performance indexes"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_supplier_ledger_view.py",
      "line": 4,
      "snippet": "This creates a plain SQL view `supplier_ledger` that unifies purchase order events"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_supplier_ledger_view.py",
      "line": 30,
      "snippet": "sql := 'DROP VIEW IF EXISTS supplier_ledger; CREATE VIEW supplier_ledger AS ' ||"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_supplier_ledger_view.py",
      "line": 60,
      "snippet": "\"DROP VIEW IF EXISTS supplier_ledger;\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\check_supplier_ledger.py",
      "line": 12,
      "snippet": "cur.execute(\"SELECT to_regclass('public.supplier_ledger');\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\check_supplier_ledger.py",
      "line": 14,
      "snippet": "print('supplier_ledger regclass:', res)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\check_supplier_ledger.py",
      "line": 18,
      "snippet": "cur.execute('SELECT * FROM supplier_ledger LIMIT 5;')"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\check_supplier_ledger.py",
      "line": 24,
      "snippet": "print('Could not select from supplier_ledger (this may be expected if view not present):', e)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\check_supplier_ledger.py",
      "line": 27,
      "snippet": "cur.execute(\"SELECT table_schema, table_name FROM information_schema.views WHERE table_name = 'supplier_ledger';\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\create_supplier_ledger_view.py",
      "line": 62,
      "snippet": "f\"DROP VIEW IF EXISTS supplier_ledger; CREATE VIEW supplier_ledger AS SELECT {', '.join(po_select)} FROM purchase_orders po \""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\create_supplier_ledger_view.py",
      "line": 66,
      "snippet": "print('Creating supplier_ledger with SQL length', len(create_view_sql))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\create_supplier_ledger_view.py",
      "line": 70,
      "snippet": "print('supplier_ledger view created successfully')"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\create_supplier_ledger_view.py",
      "line": 73,
      "snippet": "print('Failed to create supplier_ledger view:', e)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\db_explain.py",
      "line": 23,
      "snippet": "'supplier_ledger_view_sample': ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\db_explain.py",
      "line": 24,
      "snippet": "\"SELECT event_date, event_type, reference_number FROM supplier_ledger WHERE supplier_id = %s ORDER BY event_date DESC LIMIT 10\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_supplier_ledger.py",
      "line": 11,
      "snippet": "def test_supplier_ledger_endpoint_exists(authenticated_client):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_supplier_ledger_contract.py",
      "line": 1,
      "snippet": "def test_supplier_ledger_includes_event_ids(authenticated_client):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_supplier_variant_ledger_pagination.py",
      "line": 1,
      "snippet": "def test_supplier_ledger_pagination_contract(authenticated_client):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 412,
      "snippet": "def get_supplier_ledger(supplier_id):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 414,
      "snippet": "# If a DB view `supplier_ledger` exists prefer querying it (simpler and index-friendly)."
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 427,
      "snippet": "# Check if supplier_ledger view exists"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 428,
      "snippet": "cur.execute(\"SELECT to_regclass('public.supplier_ledger')\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 445,
      "snippet": "count_q = f\"SELECT COUNT(*) FROM supplier_ledger WHERE {where_sql}\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 451,
      "snippet": "FROM supplier_ledger"
    }
  ],
  "table_constraints": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_remove_model_uniqueness.py",
      "line": 19,
      "snippet": "FROM information_schema.table_constraints AS tc"
    }
  ],
  "table_name": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\check_columns.py",
      "line": 11,
      "snippet": "WHERE table_name='process_subprocesses'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\check_schema_mismatches.py",
      "line": 27,
      "snippet": "WHERE table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\check_table.py",
      "line": 20,
      "snippet": "WHERE table_name = 'item_variant'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\check_table.py",
      "line": 31,
      "snippet": "WHERE table_name = 'item_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\test_variants.py",
      "line": 27,
      "snippet": "WHERE table_name='item_category_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 75,
      "snippet": "def get_or_create_master_id(cur, value, table_name, id_col, name_col):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 80,
      "snippet": "sql.Identifier(id_col), sql.Identifier(table_name), sql.Identifier(name_col)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\utils.py",
      "line": 87,
      "snippet": "sql.Identifier(table_name), sql.Identifier(name_col), sql.Identifier(id_col)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 28,
      "snippet": "table_name VARCHAR(100) NOT NULL,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 94,
      "snippet": "WHERE table_name = 'import_jobs' AND column_name = 'import_id'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_master_tables.py",
      "line": 38,
      "snippet": "IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='item_master' AND column_name='model') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_master_tables.py",
      "line": 48,
      "snippet": "IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='item_master' AND column_name='variation') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_master_tables.py",
      "line": 68,
      "snippet": "IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='item_master' AND column_name='model') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_master_tables.py",
      "line": 79,
      "snippet": "IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='item_master' AND column_name='variation') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_supplier_ledger_view.py",
      "line": 23,
      "snippet": "SELECT 1 FROM information_schema.columns WHERE table_name = 'stock_receipts' AND column_name = 'notes'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_supplier_ledger_view.py",
      "line": 26,
      "snippet": "SELECT 1 FROM information_schema.columns WHERE table_name = 'purchase_orders' AND column_name = 'notes'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 60,
      "snippet": "WHERE table_name='item_master' AND column_name='model_id'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 88,
      "snippet": "WHERE table_name='color_master' AND column_name='color_code'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 116,
      "snippet": "WHERE table_name='size_master' AND column_name='size_code'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 136,
      "snippet": "WHERE table_name='model_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 152,
      "snippet": "WHERE table_name='variation_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 285,
      "snippet": "table_name VARCHAR(100) NOT NULL,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 294,
      "snippet": "CREATE INDEX IF NOT EXISTS idx_process_audit_log_table ON process_audit_log(table_name);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 295,
      "snippet": "CREATE INDEX IF NOT EXISTS idx_process_audit_log_record ON process_audit_log(table_name, record_id);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 357,
      "snippet": "SELECT table_name"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 360,
      "snippet": "AND table_name IN ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 366,
      "snippet": "ORDER BY table_name;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 74,
      "snippet": "WHERE table_name = 'production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 89,
      "snippet": "WHERE table_name = 'item_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 95,
      "snippet": "WHERE table_name = 'substitute_groups'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 115,
      "snippet": "WHERE table_name = 'production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 149,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name='substitute_groups'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 154,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name='item_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.py",
      "line": 159,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name='production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_remove_model_uniqueness.py",
      "line": 14,
      "snippet": "def get_constraint_name(cur, table_name, column_name):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_remove_model_uniqueness.py",
      "line": 24,
      "snippet": "AND tc.table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_remove_model_uniqueness.py",
      "line": 28,
      "snippet": "(table_name, column_name),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_update_discount_fields.py",
      "line": 24,
      "snippet": "IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='stock_receipts' AND column_name='discount_amount') AND NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='stock_receipts' AND column_name='discount_percentage') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_update_discount_fields.py",
      "line": 56,
      "snippet": "IF EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='stock_receipts' AND column_name='discount_percentage') THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\check_supplier_ledger.py",
      "line": 27,
      "snippet": "cur.execute(\"SELECT table_schema, table_name FROM information_schema.views WHERE table_name = 'supplier_ledger';\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\scripts\\create_supplier_ledger_view.py",
      "line": 13,
      "snippet": "cur.execute(\"SELECT 1 FROM information_schema.columns WHERE table_name=%s AND column_name=%s;\", (table, column))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\conftest.py",
      "line": 181,
      "snippet": "\"SELECT EXISTS (SELECT FROM information_schema.tables WHERE table_name='processes');\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\conftest.py",
      "line": 189,
      "snippet": "\"SELECT table_name FROM information_schema.tables WHERE table_schema='public' ORDER BY table_name;\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\conftest.py",
      "line": 197,
      "snippet": "\"SELECT column_name FROM information_schema.columns WHERE table_name='processes' ORDER BY ordinal_position;\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\test_project_audit.py",
      "line": 107,
      "snippet": "# look for simple patterns: FROM table_name, INTO table_name, JOIN table_name"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_inventory_alerts.py",
      "line": 31,
      "snippet": "WHERE table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 11,
      "snippet": "def _get_columns(cur, table_name: str):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 16,
      "snippet": "WHERE table_schema = 'public' AND table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\ui\\test_inline_editor_variants.py",
      "line": 18,
      "snippet": "(table_name,),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 543,
      "snippet": "WHERE table_name = 'process_subprocesses'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 969,
      "snippet": "\"SELECT column_name FROM information_schema.columns WHERE table_name='processes'\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\production_lot.py",
      "line": 248,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s AND column_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 25,
      "snippet": "def _make_api_crud_routes(entity_name, table_name, id_col, name_col):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 39,
      "snippet": "sql.Identifier(table_name),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 57,
      "snippet": "sql.Identifier(table_name),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 83,
      "snippet": "sql.Identifier(table_name),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 105,
      "snippet": "sql.Identifier(table_name), sql.Identifier(id_col)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1723,
      "snippet": "def get_master_id_with_cache(cache, value, table_name, id_col, name_col):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1728,
      "snippet": "sql.Identifier(table_name),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\routes.py",
      "line": 1741,
      "snippet": "sql.Identifier(table_name),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 124,
      "snippet": "RETURNING id, import_id, user_id, table_name, total_rows;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 129,
      "snippet": "job_id, import_id, user_id, table_name, total_rows = result"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 139,
      "snippet": "\"table_name\": table_name,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 406,
      "snippet": "table_name: str,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 416,
      "snippet": "table_name: Name of target table (e.g., 'item_master')"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 428,
      "snippet": "import_id, user_id, table_name, total_rows, status"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\background_worker.py",
      "line": 432,
      "snippet": "(import_id, user_id, table_name, total_rows),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\costing_service.py",
      "line": 61,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 288,
      "snippet": "WHERE table_name='item_master' AND column_name='deleted_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 301,
      "snippet": "WHERE table_name='item_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 345,
      "snippet": "WHERE table_name='item_master' AND column_name='updated_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 380,
      "snippet": "WHERE table_name='color_master' AND column_name='deleted_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 392,
      "snippet": "WHERE table_name='color_master' AND column_name='updated_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 428,
      "snippet": "WHERE table_name='size_master' AND column_name='deleted_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 440,
      "snippet": "WHERE table_name='size_master' AND column_name='updated_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 473,
      "snippet": "SELECT table_name FROM information_schema.tables"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 474,
      "snippet": "WHERE table_name='model_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 482,
      "snippet": "WHERE table_name='model_master' AND column_name='deleted_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 516,
      "snippet": "SELECT table_name FROM information_schema.tables"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 517,
      "snippet": "WHERE table_name='variation_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 525,
      "snippet": "WHERE table_name='variation_master' AND column_name='deleted_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 576,
      "snippet": "WHERE table_name='item_variant' AND column_name='deleted_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 96,
      "snippet": "\"SELECT column_name FROM information_schema.columns WHERE table_name='processes'\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 212,
      "snippet": "WHERE table_name = 'process_subprocesses'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 284,
      "snippet": "WHERE table_name = 'process_subprocesses' AND column_name = 'sequence_order'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 600,
      "snippet": "\"SELECT column_name FROM information_schema.columns WHERE table_name='processes'\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 699,
      "snippet": "\"SELECT column_name FROM information_schema.columns WHERE table_name='processes'\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 861,
      "snippet": "WHERE table_name = 'process_subprocesses'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 940,
      "snippet": "WHERE table_name = 'process_subprocesses'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 470,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 297,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 488,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 635,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\validators\\production_lot_validator.py",
      "line": 36,
      "snippet": "WHERE table_schema = current_schema() AND table_name = %s AND column_name = %s"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 165,
      "snippet": "table_name TEXT;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 169,
      "snippet": "FOREACH table_name IN ARRAY ARRAY['variant_usage', 'cost_items', 'substitute_groups', 'process_timing', 'conditional_flags']"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 171,
      "snippet": "IF NOT EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = table_name) THEN"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 172,
      "snippet": "missing_tables := array_append(missing_tables, table_name);"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 185,
      "snippet": "'variant_usage' as table_name,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 21,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name = 'production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 27,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name = 'item_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 32,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name = 'substitute_groups'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 48,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name = 'production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 64,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name = 'production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 87,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name='substitute_groups'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 92,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name='item_master'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 97,
      "snippet": "SELECT 1 FROM information_schema.tables WHERE table_name='production_lots'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 106,
      "snippet": "-- SELECT column_name FROM information_schema.columns WHERE table_name='production_lots' AND column_name IN ('created_by','worst_case_estimated_cost');"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 107,
      "snippet": "-- SELECT column_name FROM information_schema.columns WHERE table_name='item_master' AND column_name='category';"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_fix_schema_nov2025.sql",
      "line": 108,
      "snippet": "-- SELECT column_name FROM information_schema.columns WHERE table_name='substitute_groups' AND column_name='deleted_at';"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\HIGH_PRIORITY_IMPLEMENTATION_COMPLETE.md",
      "line": 192,
      "snippet": "WHERE table_name = 'audit_log';"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\TODO_LIST_COMPLETION_SUMMARY.md",
      "line": 35,
      "snippet": "SELECT table_name FROM information_schema.tables"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\TODO_LIST_COMPLETION_SUMMARY.md",
      "line": 36,
      "snippet": "WHERE table_name = 'audit_log';"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 352,
      "snippet": "- **psql `\\d table_name`:** Show table schema + indexes"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\PERFORMANCE.md",
      "line": 373,
      "snippet": "CREATE INDEX CONCURRENTLY idx_table_column ON table_name(column_name);"
    }
  ],
  "test_inventory_alerts": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_monitoring.py",
      "line": 3,
      "snippet": "# Seed some alerts using the existing helper from test_inventory_alerts"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\api\\test_monitoring.py",
      "line": 4,
      "snippet": "from tests.api.test_inventory_alerts import _seed_lot_with_alerts"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPREHENSIVE_AUDIT_REPORT.md",
      "line": 163,
      "snippet": "\u2502   \u251c\u2500\u2500 test_inventory_alerts.py \u2705"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\COMPREHENSIVE_AUDIT_REPORT.md",
      "line": 241,
      "snippet": "- `tests/api/test_inventory_alerts.py`"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\ALERT_UI_INTEGRATION.md",
      "line": 256,
      "snippet": "pytest tests/api/test_inventory_alerts.py -v"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\docs\\UPF_INVENTORY_ALERTS_USAGE.md",
      "line": 259,
      "snippet": "pytest tests/api/test_inventory_alerts.py -v"
    }
  ],
  "timing_data": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 402,
      "snippet": "timing_data AS ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 425,
      "snippet": "LEFT JOIN timing_data td ON td.process_subprocess_id = si.ps_id"
    }
  ],
  "updated_at": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 37,
      "snippet": "updated_at TIMESTAMP DEFAULT NOW(),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 115,
      "snippet": "# Create trigger to update updated_at timestamp"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 117,
      "snippet": "CREATE OR REPLACE FUNCTION update_import_jobs_updated_at()"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 120,
      "snippet": "NEW.updated_at = NOW();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 127,
      "snippet": "DROP TRIGGER IF EXISTS trigger_update_import_jobs_updated_at ON import_jobs;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 131,
      "snippet": "CREATE TRIGGER trigger_update_import_jobs_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 134,
      "snippet": "EXECUTE FUNCTION update_import_jobs_updated_at();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 136,
      "snippet": "print(\"\u2705 Created trigger for updated_at timestamp\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 152,
      "snippet": "\"DROP TRIGGER IF EXISTS trigger_update_import_jobs_updated_at ON import_jobs;\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_import_jobs.py",
      "line": 154,
      "snippet": "cur.execute(\"DROP FUNCTION IF EXISTS update_import_jobs_updated_at();\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system.py",
      "line": 13,
      "snippet": "\"CREATE TABLE IF NOT EXISTS inventory_alert_rules (alert_rule_id SERIAL PRIMARY KEY, variant_id BIGINT REFERENCES item_variant(variant_id) ON DELETE CASCADE, safety_stock_quantity INTEGER NOT NULL DEFAULT 10, reorder_point_quantity INTEGER NOT NULL DEFAULT 20, alert_threshold_percentage DECIMAL(5,2) NOT NULL DEFAULT 75.00, is_active BOOLEAN DEFAULT TRUE, created_at TIMESTAMP DEFAULT CURRENT_TIMEST"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system_temp.py",
      "line": 40,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_inventory_alert_system_temp.py",
      "line": 80,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 11,
      "snippet": "4. Adds indexes for frequently filtered columns (category, updated_at, etc.)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 46,
      "snippet": "# Performance index for updated_at (useful for tracking recent changes)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 48,
      "snippet": "CREATE INDEX IF NOT EXISTS idx_item_master_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 49,
      "snippet": "ON item_master(updated_at DESC)"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 52,
      "snippet": "print(\"\u2705 Created index on item_master(updated_at)\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_unique_indexes_for_upsert.py",
      "line": 201,
      "snippet": "\"idx_item_master_updated_at\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 58,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 76,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 109,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 128,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 157,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 173,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 189,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 205,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 232,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 254,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 291,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 412,
      "snippet": "CREATE OR REPLACE FUNCTION update_updated_at_column()"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 415,
      "snippet": "NEW.updated_at = CURRENT_TIMESTAMP;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 421,
      "snippet": "# Apply triggers to tables with updated_at columns"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 422,
      "snippet": "tables_with_updated_at = ["
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 436,
      "snippet": "for table in tables_with_updated_at:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 438,
      "snippet": "DROP TRIGGER IF EXISTS update_{table}_updated_at ON {table};"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 439,
      "snippet": "CREATE TRIGGER update_{table}_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 442,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_universal_process_framework.py",
      "line": 482,
      "snippet": "cur.execute(\"DROP FUNCTION IF EXISTS update_updated_at_column() CASCADE;\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 42,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 63,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 301,
      "snippet": "print(\"\\n[14/15] Creating triggers for updated_at timestamps...\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 305,
      "snippet": "CREATE OR REPLACE FUNCTION update_updated_at_column()"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 308,
      "snippet": "NEW.updated_at = CURRENT_TIMESTAMP;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 315,
      "snippet": "tables_with_updated_at = [\"processes\", \"subprocesses\"]"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 316,
      "snippet": "for table in tables_with_updated_at:"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 318,
      "snippet": "DROP TRIGGER IF EXISTS update_{table}_updated_at ON {table};"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 319,
      "snippet": "CREATE TRIGGER update_{table}_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\migration_add_upf_tables.py",
      "line": 322,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 40,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 70,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 117,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 176,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 346,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 379,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\tests\\services\\test_process_service_coverage.py",
      "line": 498,
      "snippet": "\"updated_at\": None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\process_management.py",
      "line": 570,
      "snippet": "SET {\", \".join(updates)}, updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\subprocess_management.py",
      "line": 313,
      "snippet": "created_at, updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 326,
      "snippet": "updates.append(\"updated_at = NOW()\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 426,
      "snippet": "updated_at = NOW()"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 466,
      "snippet": "updated_at = NOW()"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\api\\variant_management.py",
      "line": 562,
      "snippet": "updates.append(\"updated_at = NOW()\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 47,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 75,
      "snippet": "\"updated_at\": _fmt(self.updated_at),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 104,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 118,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 173,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 188,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 210,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 231,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 282,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 293,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 312,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 324,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 342,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 353,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 385,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 400,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 423,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 442,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 485,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\process.py",
      "line": 502,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\production_lot.py",
      "line": 98,
      "snippet": "self.updated_at: datetime = data.get(\"updated_at\", datetime.now())"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\models\\production_lot.py",
      "line": 111,
      "snippet": "\"updated_at\": self.updated_at.isoformat() if self.updated_at else None,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 272,
      "snippet": "ON CONFLICT: Updates category, description, model_id, variation_id, updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 342,
      "snippet": "# Add updated_at if column exists"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 345,
      "snippet": "WHERE table_name='item_master' AND column_name='updated_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 348,
      "snippet": "update_parts.append(\"updated_at = NOW()\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 389,
      "snippet": "# Check for updated_at column"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 392,
      "snippet": "WHERE table_name='color_master' AND column_name='updated_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 394,
      "snippet": "has_updated_at = cur.fetchone() is not None"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 397,
      "snippet": "\"updated_at = NOW()\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 398,
      "snippet": "if has_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 437,
      "snippet": "# Check for updated_at column"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 440,
      "snippet": "WHERE table_name='size_master' AND column_name='updated_at'"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 442,
      "snippet": "has_updated_at = cur.fetchone() is not None"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\import_service.py",
      "line": 445,
      "snippet": "\"updated_at = NOW()\" if has_updated_at else \"size_name = EXCLUDED.size_name\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\inventory_alert_service.py",
      "line": 49,
      "snippet": "updated_at = CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\inventory_alert_service.py",
      "line": 87,
      "snippet": "\"UPDATE inventory_alert_rules SET is_active = FALSE, updated_at = CURRENT_TIMESTAMP WHERE alert_rule_id = %s\","
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\inventory_alert_service.py",
      "line": 564,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 744,
      "snippet": "updates.append(\"updated_at = CURRENT_TIMESTAMP\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 793,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 820,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\production_service.py",
      "line": 527,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\progress_tracker.py",
      "line": 137,
      "snippet": "\"updated_at\": datetime.utcnow().isoformat(),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\progress_tracker.py",
      "line": 207,
      "snippet": "\"updated_at\": datetime.utcnow().isoformat(),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\progress_tracker.py",
      "line": 244,
      "snippet": "\"updated_at\": datetime.utcnow().isoformat(),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\progress_tracker.py",
      "line": 296,
      "snippet": "updated_at = datetime.fromisoformat(data.get(\"updated_at\", \"\"))"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\progress_tracker.py",
      "line": 297,
      "snippet": "if now - updated_at > timedelta(seconds=self.expiry_seconds):"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\subprocess_service.py",
      "line": 260,
      "snippet": "updates.append(\"updated_at = CURRENT_TIMESTAMP\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 97,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 184,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 366,
      "snippet": "updates.append(\"updated_at = CURRENT_TIMESTAMP\")"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\variant_service.py",
      "line": 408,
      "snippet": "updated_at = CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 19,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 41,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 59,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 88,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 107,
      "snippet": "updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 118,
      "snippet": "CREATE OR REPLACE FUNCTION update_updated_at_column()"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 121,
      "snippet": "NEW.updated_at = CURRENT_TIMESTAMP;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 126,
      "snippet": "-- Apply triggers to tables with updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 127,
      "snippet": "DROP TRIGGER IF EXISTS update_variant_usage_updated_at ON variant_usage;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 128,
      "snippet": "CREATE TRIGGER update_variant_usage_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 131,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 133,
      "snippet": "DROP TRIGGER IF EXISTS update_cost_items_updated_at ON cost_items;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 134,
      "snippet": "CREATE TRIGGER update_cost_items_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 137,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 139,
      "snippet": "DROP TRIGGER IF EXISTS update_substitute_groups_updated_at ON substitute_groups;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 140,
      "snippet": "CREATE TRIGGER update_substitute_groups_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 143,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 145,
      "snippet": "DROP TRIGGER IF EXISTS update_process_timing_updated_at ON process_timing;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 146,
      "snippet": "CREATE TRIGGER update_process_timing_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 149,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 151,
      "snippet": "DROP TRIGGER IF EXISTS update_conditional_flags_updated_at ON conditional_flags;"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 152,
      "snippet": "CREATE TRIGGER update_conditional_flags_updated_at"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\add_missing_upf_tables.sql",
      "line": 155,
      "snippet": "EXECUTE FUNCTION update_updated_at_column();"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 28,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 44,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 53,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 62,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 71,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 115,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 135,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 155,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\migrations\\init_schema.sql",
      "line": 203,
      "snippet": "updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\static\\js\\inventory_alerts.js",
      "line": 73,
      "snippet": "<td>${r.updated_at || r.created_at || ''}</td>"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 64,
      "snippet": "\"updated_at\": \"2024-01-15T10:30:00Z\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 97,
      "snippet": "\"updated_at\": \"2024-01-15T10:30:00Z\""
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\API_REFERENCE_UNIVERSAL_PROCESS_FRAMEWORK.md",
      "line": 1044,
      "snippet": "- `updated_at` - Last update timestamp"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UNIVERSAL_PROCESS_FRAMEWORK_PROGRESS.md",
      "line": 431,
      "snippet": "'updated_at': datetime.now(),"
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\UPF_IMPLEMENTATION_COMPLETE.md",
      "line": 38,
      "snippet": "- **3 Triggers** - updated_at timestamps, lot number auto-generation"
    }
  ],
  "variants_data": [
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 311,
      "snippet": "variants_data AS ("
    },
    {
      "file": "C:\\Users\\erkar\\OneDrive\\Desktop\\MTC\\Project-root\\app\\services\\process_service.py",
      "line": 422,
      "snippet": "LEFT JOIN variants_data vd ON vd.process_subprocess_id = si.ps_id"
    }
  ]
}